{{ define "index" }}
<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../assets/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="../assets/css/app.css">
    <title>bsIO</title>

</head>

<body>
    <header class="navbar navbar-expand-lg flex-row">
        <a class="navbar-brand" href="#">bsIO</a>
        <div class="navbar-text">Welcome to the BattleShip.io</div>
        <ul class="navbar-nav flex-row ml-auto d-flex">
            <li class="nav-item">
                <a class="nav-link" aria-label="GitHub" href="https://github.com/Adictes/bsIO">GitHub</a>
            </li>
        </ul>
    </header>
    <div class="container-fluid">
        <div class="row">
            <div class="col-lg border">
                <p class="lead"> {{.}} </p>
                <table class="table table-bordered">
                    <tr>
                        <td id="0-0" class="hf" onclick="send('0-0')"></td>
                        <td id="0-1" class="hf" onclick="send('0-1')"></td>
                        <td id="0-2" class="hf" onclick="send('0-2')"></td>
                        <td id="0-3" class="hf" onclick="send('0-3')"></td>
                        <td id="0-4" class="hf" onclick="send('0-4')"></td>
                        <td id="0-5" class="hf" onclick="send('0-5')"></td>
                        <td id="0-6" class="hf" onclick="send('0-6')"></td>
                        <td id="0-7" class="hf" onclick="send('0-7')"></td>
                        <td id="0-8" class="hf" onclick="send('0-8')"></td>
                        <td id="0-9" class="hf" onclick="send('0-9')"></td>
                    </tr>
                    <tr>
                        <td id="1-0" class="hf" onclick="send('1-0')"></td>
                        <td id="1-1" class="hf" onclick="send('1-1')"></td>
                        <td id="1-2" class="hf" onclick="send('1-2')"></td>
                        <td id="1-3" class="hf" onclick="send('1-3')"></td>
                        <td id="1-4" class="hf" onclick="send('1-4')"></td>
                        <td id="1-5" class="hf" onclick="send('1-5')"></td>
                        <td id="1-6" class="hf" onclick="send('1-6')"></td>
                        <td id="1-7" class="hf" onclick="send('1-7')"></td>
                        <td id="1-8" class="hf" onclick="send('1-8')"></td>
                        <td id="1-9" class="hf" onclick="send('1-9')"></td>
                    </tr>
                    <tr>
                        <td id="2-0" class="hf" onclick="send('2-0')"></td>
                        <td id="2-1" class="hf" onclick="send('2-1')"></td>
                        <td id="2-2" class="hf" onclick="send('2-2')"></td>
                        <td id="2-3" class="hf" onclick="send('2-3')"></td>
                        <td id="2-4" class="hf" onclick="send('2-4')"></td>
                        <td id="2-5" class="hf" onclick="send('2-5')"></td>
                        <td id="2-6" class="hf" onclick="send('2-6')"></td>
                        <td id="2-7" class="hf" onclick="send('2-7')"></td>
                        <td id="2-8" class="hf" onclick="send('2-8')"></td>
                        <td id="2-9" class="hf" onclick="send('2-9')"></td>
                    </tr>
                    <tr>
                        <td id="3-0" class="hf" onclick="send('3-0')"></td>
                        <td id="3-1" class="hf" onclick="send('3-1')"></td>
                        <td id="3-2" class="hf" onclick="send('3-2')"></td>
                        <td id="3-3" class="hf" onclick="send('3-3')"></td>
                        <td id="3-4" class="hf" onclick="send('3-4')"></td>
                        <td id="3-5" class="hf" onclick="send('3-5')"></td>
                        <td id="3-6" class="hf" onclick="send('3-6')"></td>
                        <td id="3-7" class="hf" onclick="send('3-7')"></td>
                        <td id="3-8" class="hf" onclick="send('3-8')"></td>
                        <td id="3-9" class="hf" onclick="send('3-9')"></td>
                    </tr>
                    <tr>
                        <td id="4-0" class="hf" onclick="send('4-0')"></td>
                        <td id="4-1" class="hf" onclick="send('4-1')"></td>
                        <td id="4-2" class="hf" onclick="send('4-2')"></td>
                        <td id="4-3" class="hf" onclick="send('4-3')"></td>
                        <td id="4-4" class="hf" onclick="send('4-4')"></td>
                        <td id="4-5" class="hf" onclick="send('4-5')"></td>
                        <td id="4-6" class="hf" onclick="send('4-6')"></td>
                        <td id="4-7" class="hf" onclick="send('4-7')"></td>
                        <td id="4-8" class="hf" onclick="send('4-8')"></td>
                        <td id="4-9" class="hf" onclick="send('4-9')"></td>
                    </tr>
                    <tr>
                        <td id="5-0" class="hf" onclick="send('5-0')"></td>
                        <td id="5-1" class="hf" onclick="send('5-1')"></td>
                        <td id="5-2" class="hf" onclick="send('5-2')"></td>
                        <td id="5-3" class="hf" onclick="send('5-3')"></td>
                        <td id="5-4" class="hf" onclick="send('5-4')"></td>
                        <td id="5-5" class="hf" onclick="send('5-5')"></td>
                        <td id="5-6" class="hf" onclick="send('5-6')"></td>
                        <td id="5-7" class="hf" onclick="send('5-7')"></td>
                        <td id="5-8" class="hf" onclick="send('5-8')"></td>
                        <td id="5-9" class="hf" onclick="send('5-9')"></td>
                    </tr>
                    <tr>
                        <td id="6-0" class="hf" onclick="send('6-0')"></td>
                        <td id="6-1" class="hf" onclick="send('6-1')"></td>
                        <td id="6-2" class="hf" onclick="send('6-2')"></td>
                        <td id="6-3" class="hf" onclick="send('6-3')"></td>
                        <td id="6-4" class="hf" onclick="send('6-4')"></td>
                        <td id="6-5" class="hf" onclick="send('6-5')"></td>
                        <td id="6-6" class="hf" onclick="send('6-6')"></td>
                        <td id="6-7" class="hf" onclick="send('6-7')"></td>
                        <td id="6-8" class="hf" onclick="send('6-8')"></td>
                        <td id="6-9" class="hf" onclick="send('6-9')"></td>
                    </tr>
                    <tr>
                        <td id="7-0" class="hf" onclick="send('7-0')"></td>
                        <td id="7-1" class="hf" onclick="send('7-1')"></td>
                        <td id="7-2" class="hf" onclick="send('7-2')"></td>
                        <td id="7-3" class="hf" onclick="send('7-3')"></td>
                        <td id="7-4" class="hf" onclick="send('7-4')"></td>
                        <td id="7-5" class="hf" onclick="send('7-5')"></td>
                        <td id="7-6" class="hf" onclick="send('7-6')"></td>
                        <td id="7-7" class="hf" onclick="send('7-7')"></td>
                        <td id="7-8" class="hf" onclick="send('7-8')"></td>
                        <td id="7-9" class="hf" onclick="send('7-9')"></td>
                    </tr>
                    <tr>
                        <td id="8-0" class="hf" onclick="send('8-0')"></td>
                        <td id="8-1" class="hf" onclick="send('8-1')"></td>
                        <td id="8-2" class="hf" onclick="send('8-2')"></td>
                        <td id="8-3" class="hf" onclick="send('8-3')"></td>
                        <td id="8-4" class="hf" onclick="send('8-4')"></td>
                        <td id="8-5" class="hf" onclick="send('8-5')"></td>
                        <td id="8-6" class="hf" onclick="send('8-6')"></td>
                        <td id="8-7" class="hf" onclick="send('8-7')"></td>
                        <td id="8-8" class="hf" onclick="send('8-8')"></td>
                        <td id="8-9" class="hf" onclick="send('8-9')"></td>
                    </tr>
                    <tr>
                        <td id="9-0" class="hf" onclick="send('9-0')"></td>
                        <td id="9-1" class="hf" onclick="send('9-1')"></td>
                        <td id="9-2" class="hf" onclick="send('9-2')"></td>
                        <td id="9-3" class="hf" onclick="send('9-3')"></td>
                        <td id="9-4" class="hf" onclick="send('9-4')"></td>
                        <td id="9-5" class="hf" onclick="send('9-5')"></td>
                        <td id="9-6" class="hf" onclick="send('9-6')"></td>
                        <td id="9-7" class="hf" onclick="send('9-7')"></td>
                        <td id="9-8" class="hf" onclick="send('9-8')"></td>
                        <td id="9-9" class="hf" onclick="send('9-9')"></td>
                    </tr>
                </table>
                <p class="lead">Кол-во оставшихся для расстановки кораблей:</p>
                <div class="row">
                    <div class="col-8">
                        <ul class="list-group">
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                Однопалубных
                                <span id="single-decker" class="badge badge-info badge-pill">4</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                Двухпалубных
                                <span id="two-decker" class="badge badge-info badge-pill">3</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                Трехпалубных
                                <span id="three-decker" class="badge badge-info badge-pill">2</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                Четырехпалубных
                                <span id="four-decker" class="badge badge-info badge-pill">1</span>
                            </li>
                        </ul>
                    </div>
                    <div class="col-4 align-self-center">
                        <button id="stg" type="button" class="btn-lg btn-success" onclick="startTheGame()">I'm ready</button>
                    </div>
                </div>
            </div>
            <div class="col-lg-5 border">
                <p>Тут чат</p>
            </div>
            <div class="col-lg border">
                <p class="lead"> Ник соперника </p>
                <table class="table table-bordered">
                    <tr>
                        <td id="e0-0" onclick="hit('e0-0')"></td>
                        <td id="e0-1" onclick="hit('e0-1')"></td>
                        <td id="e0-2" onclick="hit('e0-2')"></td>
                        <td id="e0-3" onclick="hit('e0-3')"></td>
                        <td id="e0-4" onclick="hit('e0-4')"></td>
                        <td id="e0-5" onclick="hit('e0-5')"></td>
                        <td id="e0-6" onclick="hit('e0-6')"></td>
                        <td id="e0-7" onclick="hit('e0-7')"></td>
                        <td id="e0-8" onclick="hit('e0-8')"></td>
                        <td id="e0-9" onclick="hit('e0-9')"></td>
                    </tr>
                    <tr>
                        <td id="e1-0" onclick="hit('e1-0')"></td>
                        <td id="e1-1" onclick="hit('e1-1')"></td>
                        <td id="e1-2" onclick="hit('e1-2')"></td>
                        <td id="e1-3" onclick="hit('e1-3')"></td>
                        <td id="e1-4" onclick="hit('e1-4')"></td>
                        <td id="e1-5" onclick="hit('e1-5')"></td>
                        <td id="e1-6" onclick="hit('e1-6')"></td>
                        <td id="e1-7" onclick="hit('e1-7')"></td>
                        <td id="e1-8" onclick="hit('e1-8')"></td>
                        <td id="e1-9" onclick="hit('e1-9')"></td>
                    </tr>
                    <tr>
                        <td id="e2-0" onclick="hit('e2-0')"></td>
                        <td id="e2-1" onclick="hit('e2-1')"></td>
                        <td id="e2-2" onclick="hit('e2-2')"></td>
                        <td id="e2-3" onclick="hit('e2-3')"></td>
                        <td id="e2-4" onclick="hit('e2-4')"></td>
                        <td id="e2-5" onclick="hit('e2-5')"></td>
                        <td id="e2-6" onclick="hit('e2-6')"></td>
                        <td id="e2-7" onclick="hit('e2-7')"></td>
                        <td id="e2-8" onclick="hit('e2-8')"></td>
                        <td id="e2-9" onclick="hit('e2-9')"></td>
                    </tr>
                    <tr>
                        <td id="e3-0" onclick="hit('e3-0')"></td>
                        <td id="e3-1" onclick="hit('e3-1')"></td>
                        <td id="e3-2" onclick="hit('e3-2')"></td>
                        <td id="e3-3" onclick="hit('e3-3')"></td>
                        <td id="e3-4" onclick="hit('e3-4')"></td>
                        <td id="e3-5" onclick="hit('e3-5')"></td>
                        <td id="e3-6" onclick="hit('e3-6')"></td>
                        <td id="e3-7" onclick="hit('e3-7')"></td>
                        <td id="e3-8" onclick="hit('e3-8')"></td>
                        <td id="e3-9" onclick="hit('e3-9')"></td>
                    </tr>
                    <tr>
                        <td id="e4-0" onclick="hit('e4-0')"></td>
                        <td id="e4-1" onclick="hit('e4-1')"></td>
                        <td id="e4-2" onclick="hit('e4-2')"></td>
                        <td id="e4-3" onclick="hit('e4-3')"></td>
                        <td id="e4-4" onclick="hit('e4-4')"></td>
                        <td id="e4-5" onclick="hit('e4-5')"></td>
                        <td id="e4-6" onclick="hit('e4-6')"></td>
                        <td id="e4-7" onclick="hit('e4-7')"></td>
                        <td id="e4-8" onclick="hit('e4-8')"></td>
                        <td id="e4-9" onclick="hit('e4-9')"></td>
                    </tr>
                    <tr>
                        <td id="e5-0" onclick="hit('e5-0')"></td>
                        <td id="e5-1" onclick="hit('e5-1')"></td>
                        <td id="e5-2" onclick="hit('e5-2')"></td>
                        <td id="e5-3" onclick="hit('e5-3')"></td>
                        <td id="e5-4" onclick="hit('e5-4')"></td>
                        <td id="e5-5" onclick="hit('e5-5')"></td>
                        <td id="e5-6" onclick="hit('e5-6')"></td>
                        <td id="e5-7" onclick="hit('e5-7')"></td>
                        <td id="e5-8" onclick="hit('e5-8')"></td>
                        <td id="e5-9" onclick="hit('e5-9')"></td>
                    </tr>
                    <tr>
                        <td id="e6-0" onclick="hit('e6-0')"></td>
                        <td id="e6-1" onclick="hit('e6-1')"></td>
                        <td id="e6-2" onclick="hit('e6-2')"></td>
                        <td id="e6-3" onclick="hit('e6-3')"></td>
                        <td id="e6-4" onclick="hit('e6-4')"></td>
                        <td id="e6-5" onclick="hit('e6-5')"></td>
                        <td id="e6-6" onclick="hit('e6-6')"></td>
                        <td id="e6-7" onclick="hit('e6-7')"></td>
                        <td id="e6-8" onclick="hit('e6-8')"></td>
                        <td id="e6-9" onclick="hit('e6-9')"></td>
                    </tr>
                    <tr>
                        <td id="e7-0" onclick="hit('e7-0')"></td>
                        <td id="e7-1" onclick="hit('e7-1')"></td>
                        <td id="e7-2" onclick="hit('e7-2')"></td>
                        <td id="e7-3" onclick="hit('e7-3')"></td>
                        <td id="e7-4" onclick="hit('e7-4')"></td>
                        <td id="e7-5" onclick="hit('e7-5')"></td>
                        <td id="e7-6" onclick="hit('e7-6')"></td>
                        <td id="e7-7" onclick="hit('e7-7')"></td>
                        <td id="e7-8" onclick="hit('e7-8')"></td>
                        <td id="e7-9" onclick="hit('e7-9')"></td>
                    </tr>
                    <tr>
                        <td id="e8-0" onclick="hit('e8-0')"></td>
                        <td id="e8-1" onclick="hit('e8-1')"></td>
                        <td id="e8-2" onclick="hit('e8-2')"></td>
                        <td id="e8-3" onclick="hit('e8-3')"></td>
                        <td id="e8-4" onclick="hit('e8-4')"></td>
                        <td id="e8-5" onclick="hit('e8-5')"></td>
                        <td id="e8-6" onclick="hit('e8-6')"></td>
                        <td id="e8-7" onclick="hit('e8-7')"></td>
                        <td id="e8-8" onclick="hit('e8-8')"></td>
                        <td id="e8-9" onclick="hit('e8-9')"></td>
                    </tr>
                    <tr>
                        <td id="e9-0" onclick="hit('e9-0')"></td>
                        <td id="e9-1" onclick="hit('e9-1')"></td>
                        <td id="e9-2" onclick="hit('e9-2')"></td>
                        <td id="e9-3" onclick="hit('e9-3')"></td>
                        <td id="e9-4" onclick="hit('e9-4')"></td>
                        <td id="e9-5" onclick="hit('e9-5')"></td>
                        <td id="e9-6" onclick="hit('e9-6')"></td>
                        <td id="e9-7" onclick="hit('e9-7')"></td>
                        <td id="e9-8" onclick="hit('e9-8')"></td>
                        <td id="e9-9" onclick="hit('e9-9')"></td>
                    </tr>
                </table>
                <p class="lead">Кол-во сбитых кораблей:</p>
                <div class="row">
                    <div class="col">
                        <ul class="list-group">
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                Однопалубных
                                <span id="esingle-decker" class="badge badge-info badge-pill">0</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                Двухпалубных
                                <span id="etwo-decker" class="badge badge-info badge-pill">0</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                Трехпалубных
                                <span id="ethree-decker" class="badge badge-info badge-pill">0</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                Четырехпалубных
                                <span id="efour-decker" class="badge badge-info badge-pill">0</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <footer> Made by Adictes </footer>
    <script>
        var shs = new WebSocket("ws://localhost:8080/shs");

        shs.onmessage = function (event) {
            var data = JSON.parse(event.data);

            document.getElementById("single-decker").innerText = data.SingleDecker
            document.getElementById("two-decker").innerText = data.TwoDecker
            document.getElementById("three-decker").innerText = data.ThreeDecker
            document.getElementById("four-decker").innerText = data.FourDecker
        }

        function send(cell) {
            shs.send(cell);
            changeCellColor(cell);
        }

        function changeCellColor(id) {
            if (document.getElementById(id).style.backgroundColor == "") {
                document.getElementById(id).style.backgroundColor = "#337ab7";
            } else {
                document.getElementById(id).style.backgroundColor = "";
            }
        }

        var hes = new WebSocket("ws://localhost:8080/hes");

        hes.onmessage = function (event) {
            var data = JSON.parse(event.data);

            if (data.Hitted == undefined) {
                document.getElementById("esingle-decker").innerText = data.SingleDecker
                document.getElementById("etwo-decker").innerText = data.TwoDecker
                document.getElementById("ethree-decker").innerText = data.ThreeDecker
                document.getElementById("efour-decker").innerText = data.FourDecker
            } else {
                if (data.Hitted != "") {
                    document.getElementById(data.Hitted).style.backgroundColor = "#337ab7";
                    document.getElementById(data.Hitted).removeAttribute("onclick");
                }

                for (i in data.Ambient) {
                    document.getElementById(data.Ambient[i]).style.backgroundColor = "#ffccff";
                    document.getElementById(data.Ambient[i]).removeAttribute("onclick");
                }
            }
        }

        function hit(cell) {
            hes.send(cell);
        }

        var stg = new WebSocket("ws://localhost:8080/stg");

        stg.onmessage = function (event) {
            var data = JSON.parse(event.data);

            if (data == true) {
                document.getElementById("stg").classList.remove("btn-success");
                document.getElementById("stg").classList.add("btn-secondary");
                document.getElementById("stg").disabled = true;

                var cells = document.getElementsByClassName("hf");
                for (i in cells) {
                    cells[i].removeAttribute("onclick");
                }
            } else {
                alert("Корабли расставлены не верно");
            }
        }

        function startTheGame() {
            stg.send("The game has begun")
        }
    </script>
</body>

</html>
{{ end }}