{{ define "index" }}
<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../assets/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="../assets/css/app.css">
    <title>bsIO</title>

</head>

<body>
    <header class="navbar navbar-expand-lg flex-row">
        <a class="navbar-brand" href="#">bsIO</a>
        <div class="navbar-text">Welcome to the BattleShip.io</div>
        <ul class="navbar-nav flex-row ml-auto d-flex">
            <li class="nav-item">
                <a class="nav-link" aria-label="GitHub" href="https://github.com/Adictes/bsIO">GitHub</a>
            </li>
        </ul>
    </header>
    <div class="container-fluid">
        <div class="row">
            <div class="col-lg border">
                <div>
                    <ul class="list-inline">
                        <li class="list-inline-item">{{.}}</li>
                        <li class="list-inline-item">
                            <span id="turn" class="badge badge-warning">Ждет</span>
                        </li>
                    </ul>
                </div>
                <table class="table table-bordered">
                    <tr>
                        <td id="h0-0" class="hf" onclick="send('h0-0')"></td>
                        <td id="h0-1" class="hf" onclick="send('h0-1')"></td>
                        <td id="h0-2" class="hf" onclick="send('h0-2')"></td>
                        <td id="h0-3" class="hf" onclick="send('h0-3')"></td>
                        <td id="h0-4" class="hf" onclick="send('h0-4')"></td>
                        <td id="h0-5" class="hf" onclick="send('h0-5')"></td>
                        <td id="h0-6" class="hf" onclick="send('h0-6')"></td>
                        <td id="h0-7" class="hf" onclick="send('h0-7')"></td>
                        <td id="h0-8" class="hf" onclick="send('h0-8')"></td>
                        <td id="h0-9" class="hf" onclick="send('h0-9')"></td>
                    </tr>
                    <tr>
                        <td id="h1-0" class="hf" onclick="send('h1-0')"></td>
                        <td id="h1-1" class="hf" onclick="send('h1-1')"></td>
                        <td id="h1-2" class="hf" onclick="send('h1-2')"></td>
                        <td id="h1-3" class="hf" onclick="send('h1-3')"></td>
                        <td id="h1-4" class="hf" onclick="send('h1-4')"></td>
                        <td id="h1-5" class="hf" onclick="send('h1-5')"></td>
                        <td id="h1-6" class="hf" onclick="send('h1-6')"></td>
                        <td id="h1-7" class="hf" onclick="send('h1-7')"></td>
                        <td id="h1-8" class="hf" onclick="send('h1-8')"></td>
                        <td id="h1-9" class="hf" onclick="send('h1-9')"></td>
                    </tr>
                    <tr>
                        <td id="h2-0" class="hf" onclick="send('h2-0')"></td>
                        <td id="h2-1" class="hf" onclick="send('h2-1')"></td>
                        <td id="h2-2" class="hf" onclick="send('h2-2')"></td>
                        <td id="h2-3" class="hf" onclick="send('h2-3')"></td>
                        <td id="h2-4" class="hf" onclick="send('h2-4')"></td>
                        <td id="h2-5" class="hf" onclick="send('h2-5')"></td>
                        <td id="h2-6" class="hf" onclick="send('h2-6')"></td>
                        <td id="h2-7" class="hf" onclick="send('h2-7')"></td>
                        <td id="h2-8" class="hf" onclick="send('h2-8')"></td>
                        <td id="h2-9" class="hf" onclick="send('h2-9')"></td>
                    </tr>
                    <tr>
                        <td id="h3-0" class="hf" onclick="send('h3-0')"></td>
                        <td id="h3-1" class="hf" onclick="send('h3-1')"></td>
                        <td id="h3-2" class="hf" onclick="send('h3-2')"></td>
                        <td id="h3-3" class="hf" onclick="send('h3-3')"></td>
                        <td id="h3-4" class="hf" onclick="send('h3-4')"></td>
                        <td id="h3-5" class="hf" onclick="send('h3-5')"></td>
                        <td id="h3-6" class="hf" onclick="send('h3-6')"></td>
                        <td id="h3-7" class="hf" onclick="send('h3-7')"></td>
                        <td id="h3-8" class="hf" onclick="send('h3-8')"></td>
                        <td id="h3-9" class="hf" onclick="send('h3-9')"></td>
                    </tr>
                    <tr>
                        <td id="h4-0" class="hf" onclick="send('h4-0')"></td>
                        <td id="h4-1" class="hf" onclick="send('h4-1')"></td>
                        <td id="h4-2" class="hf" onclick="send('h4-2')"></td>
                        <td id="h4-3" class="hf" onclick="send('h4-3')"></td>
                        <td id="h4-4" class="hf" onclick="send('h4-4')"></td>
                        <td id="h4-5" class="hf" onclick="send('h4-5')"></td>
                        <td id="h4-6" class="hf" onclick="send('h4-6')"></td>
                        <td id="h4-7" class="hf" onclick="send('h4-7')"></td>
                        <td id="h4-8" class="hf" onclick="send('h4-8')"></td>
                        <td id="h4-9" class="hf" onclick="send('h4-9')"></td>
                    </tr>
                    <tr>
                        <td id="h5-0" class="hf" onclick="send('h5-0')"></td>
                        <td id="h5-1" class="hf" onclick="send('h5-1')"></td>
                        <td id="h5-2" class="hf" onclick="send('h5-2')"></td>
                        <td id="h5-3" class="hf" onclick="send('h5-3')"></td>
                        <td id="h5-4" class="hf" onclick="send('h5-4')"></td>
                        <td id="h5-5" class="hf" onclick="send('h5-5')"></td>
                        <td id="h5-6" class="hf" onclick="send('h5-6')"></td>
                        <td id="h5-7" class="hf" onclick="send('h5-7')"></td>
                        <td id="h5-8" class="hf" onclick="send('h5-8')"></td>
                        <td id="h5-9" class="hf" onclick="send('h5-9')"></td>
                    </tr>
                    <tr>
                        <td id="h6-0" class="hf" onclick="send('h6-0')"></td>
                        <td id="h6-1" class="hf" onclick="send('h6-1')"></td>
                        <td id="h6-2" class="hf" onclick="send('h6-2')"></td>
                        <td id="h6-3" class="hf" onclick="send('h6-3')"></td>
                        <td id="h6-4" class="hf" onclick="send('h6-4')"></td>
                        <td id="h6-5" class="hf" onclick="send('h6-5')"></td>
                        <td id="h6-6" class="hf" onclick="send('h6-6')"></td>
                        <td id="h6-7" class="hf" onclick="send('h6-7')"></td>
                        <td id="h6-8" class="hf" onclick="send('h6-8')"></td>
                        <td id="h6-9" class="hf" onclick="send('h6-9')"></td>
                    </tr>
                    <tr>
                        <td id="h7-0" class="hf" onclick="send('h7-0')"></td>
                        <td id="h7-1" class="hf" onclick="send('h7-1')"></td>
                        <td id="h7-2" class="hf" onclick="send('h7-2')"></td>
                        <td id="h7-3" class="hf" onclick="send('h7-3')"></td>
                        <td id="h7-4" class="hf" onclick="send('h7-4')"></td>
                        <td id="h7-5" class="hf" onclick="send('h7-5')"></td>
                        <td id="h7-6" class="hf" onclick="send('h7-6')"></td>
                        <td id="h7-7" class="hf" onclick="send('h7-7')"></td>
                        <td id="h7-8" class="hf" onclick="send('h7-8')"></td>
                        <td id="h7-9" class="hf" onclick="send('h7-9')"></td>
                    </tr>
                    <tr>
                        <td id="h8-0" class="hf" onclick="send('h8-0')"></td>
                        <td id="h8-1" class="hf" onclick="send('h8-1')"></td>
                        <td id="h8-2" class="hf" onclick="send('h8-2')"></td>
                        <td id="h8-3" class="hf" onclick="send('h8-3')"></td>
                        <td id="h8-4" class="hf" onclick="send('h8-4')"></td>
                        <td id="h8-5" class="hf" onclick="send('h8-5')"></td>
                        <td id="h8-6" class="hf" onclick="send('h8-6')"></td>
                        <td id="h8-7" class="hf" onclick="send('h8-7')"></td>
                        <td id="h8-8" class="hf" onclick="send('h8-8')"></td>
                        <td id="h8-9" class="hf" onclick="send('h8-9')"></td>
                    </tr>
                    <tr>
                        <td id="h9-0" class="hf" onclick="send('h9-0')"></td>
                        <td id="h9-1" class="hf" onclick="send('h9-1')"></td>
                        <td id="h9-2" class="hf" onclick="send('h9-2')"></td>
                        <td id="h9-3" class="hf" onclick="send('h9-3')"></td>
                        <td id="h9-4" class="hf" onclick="send('h9-4')"></td>
                        <td id="h9-5" class="hf" onclick="send('h9-5')"></td>
                        <td id="h9-6" class="hf" onclick="send('h9-6')"></td>
                        <td id="h9-7" class="hf" onclick="send('h9-7')"></td>
                        <td id="h9-8" class="hf" onclick="send('h9-8')"></td>
                        <td id="h9-9" class="hf" onclick="send('h9-9')"></td>
                    </tr>
                </table>
                <p class="lead">Кол-во оставшихся для расстановки кораблей:</p>
                <div class="row">
                    <div class="col-8">
                        <ul class="list-group">
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                Однопалубных
                                <span id="single-decker" class="badge badge-info badge-pill">4</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                Двухпалубных
                                <span id="two-decker" class="badge badge-info badge-pill">3</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                Трехпалубных
                                <span id="three-decker" class="badge badge-info badge-pill">2</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                Четырехпалубных
                                <span id="four-decker" class="badge badge-info badge-pill">1</span>
                            </li>
                        </ul>
                    </div>
                    <div class="col-4">
                        <div class="d-flex flex-column align-self-center">
                            <div class="p-2">
                                <button id="stg" type="button" class="btn btn-success" onclick="startTheGame()">I'm ready</button>
                            </div>
                            <div class="p-2">
                                <button id="rff" type="button" class="btn btn-secondary" onclick="randomFilling()">Random filling</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-5 border">
                <p>Тут чат</p>
            </div>
            <div class="col-lg border">
                <div>
                    <ul class="list-inline">
                        <li id="ename" class="list-inline-item">Противник</li>
                        <li class="list-inline-item">
                            <span id="eturn" class="badge badge-warning">Ждет</span>
                        </li>
                    </ul>
                </div>
                <table class="table table-bordered">
                    <tr>
                        <td id="e0-0" class="ef" onclick="hit('e0-0')"></td>
                        <td id="e0-1" class="ef" onclick="hit('e0-1')"></td>
                        <td id="e0-2" class="ef" onclick="hit('e0-2')"></td>
                        <td id="e0-3" class="ef" onclick="hit('e0-3')"></td>
                        <td id="e0-4" class="ef" onclick="hit('e0-4')"></td>
                        <td id="e0-5" class="ef" onclick="hit('e0-5')"></td>
                        <td id="e0-6" class="ef" onclick="hit('e0-6')"></td>
                        <td id="e0-7" class="ef" onclick="hit('e0-7')"></td>
                        <td id="e0-8" class="ef" onclick="hit('e0-8')"></td>
                        <td id="e0-9" class="ef" onclick="hit('e0-9')"></td>
                    </tr>
                    <tr>
                        <td id="e1-0" class="ef" onclick="hit('e1-0')"></td>
                        <td id="e1-1" class="ef" onclick="hit('e1-1')"></td>
                        <td id="e1-2" class="ef" onclick="hit('e1-2')"></td>
                        <td id="e1-3" class="ef" onclick="hit('e1-3')"></td>
                        <td id="e1-4" class="ef" onclick="hit('e1-4')"></td>
                        <td id="e1-5" class="ef" onclick="hit('e1-5')"></td>
                        <td id="e1-6" class="ef" onclick="hit('e1-6')"></td>
                        <td id="e1-7" class="ef" onclick="hit('e1-7')"></td>
                        <td id="e1-8" class="ef" onclick="hit('e1-8')"></td>
                        <td id="e1-9" class="ef" onclick="hit('e1-9')"></td>
                    </tr>
                    <tr>
                        <td id="e2-0" class="ef" onclick="hit('e2-0')"></td>
                        <td id="e2-1" class="ef" onclick="hit('e2-1')"></td>
                        <td id="e2-2" class="ef" onclick="hit('e2-2')"></td>
                        <td id="e2-3" class="ef" onclick="hit('e2-3')"></td>
                        <td id="e2-4" class="ef" onclick="hit('e2-4')"></td>
                        <td id="e2-5" class="ef" onclick="hit('e2-5')"></td>
                        <td id="e2-6" class="ef" onclick="hit('e2-6')"></td>
                        <td id="e2-7" class="ef" onclick="hit('e2-7')"></td>
                        <td id="e2-8" class="ef" onclick="hit('e2-8')"></td>
                        <td id="e2-9" class="ef" onclick="hit('e2-9')"></td>
                    </tr>
                    <tr>
                        <td id="e3-0" class="ef" onclick="hit('e3-0')"></td>
                        <td id="e3-1" class="ef" onclick="hit('e3-1')"></td>
                        <td id="e3-2" class="ef" onclick="hit('e3-2')"></td>
                        <td id="e3-3" class="ef" onclick="hit('e3-3')"></td>
                        <td id="e3-4" class="ef" onclick="hit('e3-4')"></td>
                        <td id="e3-5" class="ef" onclick="hit('e3-5')"></td>
                        <td id="e3-6" class="ef" onclick="hit('e3-6')"></td>
                        <td id="e3-7" class="ef" onclick="hit('e3-7')"></td>
                        <td id="e3-8" class="ef" onclick="hit('e3-8')"></td>
                        <td id="e3-9" class="ef" onclick="hit('e3-9')"></td>
                    </tr>
                    <tr>
                        <td id="e4-0" class="ef" onclick="hit('e4-0')"></td>
                        <td id="e4-1" class="ef" onclick="hit('e4-1')"></td>
                        <td id="e4-2" class="ef" onclick="hit('e4-2')"></td>
                        <td id="e4-3" class="ef" onclick="hit('e4-3')"></td>
                        <td id="e4-4" class="ef" onclick="hit('e4-4')"></td>
                        <td id="e4-5" class="ef" onclick="hit('e4-5')"></td>
                        <td id="e4-6" class="ef" onclick="hit('e4-6')"></td>
                        <td id="e4-7" class="ef" onclick="hit('e4-7')"></td>
                        <td id="e4-8" class="ef" onclick="hit('e4-8')"></td>
                        <td id="e4-9" class="ef" onclick="hit('e4-9')"></td>
                    </tr>
                    <tr>
                        <td id="e5-0" class="ef" onclick="hit('e5-0')"></td>
                        <td id="e5-1" class="ef" onclick="hit('e5-1')"></td>
                        <td id="e5-2" class="ef" onclick="hit('e5-2')"></td>
                        <td id="e5-3" class="ef" onclick="hit('e5-3')"></td>
                        <td id="e5-4" class="ef" onclick="hit('e5-4')"></td>
                        <td id="e5-5" class="ef" onclick="hit('e5-5')"></td>
                        <td id="e5-6" class="ef" onclick="hit('e5-6')"></td>
                        <td id="e5-7" class="ef" onclick="hit('e5-7')"></td>
                        <td id="e5-8" class="ef" onclick="hit('e5-8')"></td>
                        <td id="e5-9" class="ef" onclick="hit('e5-9')"></td>
                    </tr>
                    <tr>
                        <td id="e6-0" class="ef" onclick="hit('e6-0')"></td>
                        <td id="e6-1" class="ef" onclick="hit('e6-1')"></td>
                        <td id="e6-2" class="ef" onclick="hit('e6-2')"></td>
                        <td id="e6-3" class="ef" onclick="hit('e6-3')"></td>
                        <td id="e6-4" class="ef" onclick="hit('e6-4')"></td>
                        <td id="e6-5" class="ef" onclick="hit('e6-5')"></td>
                        <td id="e6-6" class="ef" onclick="hit('e6-6')"></td>
                        <td id="e6-7" class="ef" onclick="hit('e6-7')"></td>
                        <td id="e6-8" class="ef" onclick="hit('e6-8')"></td>
                        <td id="e6-9" class="ef" onclick="hit('e6-9')"></td>
                    </tr>
                    <tr>
                        <td id="e7-0" class="ef" onclick="hit('e7-0')"></td>
                        <td id="e7-1" class="ef" onclick="hit('e7-1')"></td>
                        <td id="e7-2" class="ef" onclick="hit('e7-2')"></td>
                        <td id="e7-3" class="ef" onclick="hit('e7-3')"></td>
                        <td id="e7-4" class="ef" onclick="hit('e7-4')"></td>
                        <td id="e7-5" class="ef" onclick="hit('e7-5')"></td>
                        <td id="e7-6" class="ef" onclick="hit('e7-6')"></td>
                        <td id="e7-7" class="ef" onclick="hit('e7-7')"></td>
                        <td id="e7-8" class="ef" onclick="hit('e7-8')"></td>
                        <td id="e7-9" class="ef" onclick="hit('e7-9')"></td>
                    </tr>
                    <tr>
                        <td id="e8-0" class="ef" onclick="hit('e8-0')"></td>
                        <td id="e8-1" class="ef" onclick="hit('e8-1')"></td>
                        <td id="e8-2" class="ef" onclick="hit('e8-2')"></td>
                        <td id="e8-3" class="ef" onclick="hit('e8-3')"></td>
                        <td id="e8-4" class="ef" onclick="hit('e8-4')"></td>
                        <td id="e8-5" class="ef" onclick="hit('e8-5')"></td>
                        <td id="e8-6" class="ef" onclick="hit('e8-6')"></td>
                        <td id="e8-7" class="ef" onclick="hit('e8-7')"></td>
                        <td id="e8-8" class="ef" onclick="hit('e8-8')"></td>
                        <td id="e8-9" class="ef" onclick="hit('e8-9')"></td>
                    </tr>
                    <tr>
                        <td id="e9-0" class="ef" onclick="hit('e9-0')"></td>
                        <td id="e9-1" class="ef" onclick="hit('e9-1')"></td>
                        <td id="e9-2" class="ef" onclick="hit('e9-2')"></td>
                        <td id="e9-3" class="ef" onclick="hit('e9-3')"></td>
                        <td id="e9-4" class="ef" onclick="hit('e9-4')"></td>
                        <td id="e9-5" class="ef" onclick="hit('e9-5')"></td>
                        <td id="e9-6" class="ef" onclick="hit('e9-6')"></td>
                        <td id="e9-7" class="ef" onclick="hit('e9-7')"></td>
                        <td id="e9-8" class="ef" onclick="hit('e9-8')"></td>
                        <td id="e9-9" class="ef" onclick="hit('e9-9')"></td>
                    </tr>
                </table>
                <p class="lead">Кол-во сбитых кораблей:</p>
                <div class="row">
                    <div class="col">
                        <ul class="list-group">
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                Однопалубных
                                <span id="esingle-decker" class="badge badge-info badge-pill">0</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                Двухпалубных
                                <span id="etwo-decker" class="badge badge-info badge-pill">0</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                Трехпалубных
                                <span id="ethree-decker" class="badge badge-info badge-pill">0</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                Четырехпалубных
                                <span id="efour-decker" class="badge badge-info badge-pill">0</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <footer> Made by Adictes </footer>
    <script>
        var shs = new WebSocket("ws://localhost:8080/shs");

        shs.onmessage = function (event) {
            var data = JSON.parse(event.data);

            document.getElementById("single-decker").innerText = data.SingleDecker
            document.getElementById("two-decker").innerText = data.TwoDecker
            document.getElementById("three-decker").innerText = data.ThreeDecker
            document.getElementById("four-decker").innerText = data.FourDecker
        }

        function send(cell) {
            shs.send(cell);
            changeCellColor(cell);
        }

        function changeCellColor(id) {
            if (document.getElementById(id).style.backgroundColor == "") {
                document.getElementById(id).style.backgroundColor = "#337ab7";
            } else {
                document.getElementById(id).style.backgroundColor = "";
            }
        }

        var hes = new WebSocket("ws://localhost:8080/hes");

        function hit(cell) {
            hes.send(cell);
        }

        var clr = new WebSocket("ws://localhost:8080/clr");

        hes.onmessage = function (event) {
            var data = JSON.parse(event.data);

            if (data.Turn != undefined) {
                if (data.Turn == true) {
                    document.getElementById("turn").innerText = "Ходит";
                    document.getElementById("eturn").innerText = "Ждет";
                    document.getElementById("turn").classList.remove("badge-warning");
                    document.getElementById("turn").classList.add("badge-success");
                    document.getElementById("eturn").classList.remove("badge-success");
                    document.getElementById("eturn").classList.add("badge-warning");
                } else {
                    document.getElementById("turn").innerText = "Ждет";
                    document.getElementById("eturn").innerText = "Ходит";
                    document.getElementById("turn").classList.remove("badge-success");
                    document.getElementById("turn").classList.add("badge-warning");
                    document.getElementById("eturn").classList.remove("badge-warning");
                    document.getElementById("eturn").classList.add("badge-success");
                }
            } else if (data.Hitted != undefined) {
                if (data.Hitted != "") {
                    document.getElementById(data.Hitted).style.backgroundColor = "#990000";
                    document.getElementById(data.Hitted).removeAttribute("onclick");
                }

                for (i in data.Ambient) {
                    if (data.Ambient[i][1] == '-' || data.Ambient[i][3] == '-' ||
                        (data.Ambient[i][1] == '1' && data.Ambient[i][2] == '0') ||
                        (data.Ambient[i][3] == '1' && data.Ambient[i][4] == '0')) {
                        continue;
                    }
                    document.getElementById(data.Ambient[i]).style.backgroundColor = "#e6ffff";
                    document.getElementById(data.Ambient[i]).removeAttribute("onclick");
                }
            } else if (data.SingleDecker != undefined) {
                document.getElementById("esingle-decker").innerText = data.SingleDecker;
                document.getElementById("etwo-decker").innerText = data.TwoDecker;
                document.getElementById("ethree-decker").innerText = data.ThreeDecker;
                document.getElementById("efour-decker").innerText = data.FourDecker;
            } else if (data.Win != undefined) {
                clr.send("Do cleaning");
                cleanAll();
                if (data.Win == true) {
                    alert('Ты победил!');
                } else {
                    alert('Ты проиграл.');
                }
            }
        }

        function cleanAll() {
            document.getElementById("turn").innerText = "Ждет";
            document.getElementById("eturn").innerText = "Ждет";

            if (document.getElementById("turn").classList.contains('badge-warning') !== true) {
                document.getElementById("turn").classList.remove('badge-success');
                document.getElementById("turn").classList.add('badge-warning');
            }
            if (document.getElementById("eturn").classList.contains('badge-warning') !== true) {
                document.getElementById("eturn").classList.remove('badge-success');
                document.getElementById("eturn").classList.add('badge-warning');
            }

            var cells = document.getElementsByClassName("hf");
            for (i = 0; i < cells.length; i++) {
                cells[i].style.backgroundColor = "";
                cells[i].setAttribute('onclick', 'send(\'' + cells[i].id + '\')');
            }

            var ecells = document.getElementsByClassName("ef");
            for (i = 0; i < ecells.length; i++) {
                ecells[i].style.backgroundColor = "";
                ecells[i].setAttribute('onclick', 'hit(\'' + ecells[i].id + '\')');
            }

            document.getElementById("single-decker").innerText = 4;
            document.getElementById("two-decker").innerText = 3;
            document.getElementById("three-decker").innerText = 2;
            document.getElementById("four-decker").innerText = 1;

            document.getElementById("esingle-decker").innerText = 0;
            document.getElementById("etwo-decker").innerText = 0;
            document.getElementById("ethree-decker").innerText = 0;
            document.getElementById("efour-decker").innerText = 0;

            document.getElementById("stg").disabled = false;
            document.getElementById("stg").classList.add("btn-success");
        }

        var stg = new WebSocket("ws://localhost:8080/stg");

        stg.onmessage = function (event) {
            var data = JSON.parse(event.data);

            if (data.Correctness != undefined) {
                if (data.Correctness == true) {
                    document.getElementById("stg").classList.remove("btn-success");
                    document.getElementById("stg").disabled = true;

                    var cells = document.getElementsByClassName("hf");
                    for (i in cells) {
                        cells[i].removeAttribute("onclick");
                    }
                } else {
                    alert("Корабли расставлены не верно");
                }
            } else if (data.Name != undefined) {
                document.getElementById("ename").innerText = data.Name;
            } else if (data.Turn != undefined) {
                if (data.Turn == true) {
                    document.getElementById("eturn").innerText = "Ждет";
                    document.getElementById("turn").classList.remove("badge-warning");
                    document.getElementById("turn").classList.add("badge-success");
                } else {
                    document.getElementById("turn").innerText = "Ждет";
                    document.getElementById("eturn").classList.remove("badge-warning");
                    document.getElementById("eturn").classList.add("badge-success");
                }
            }
        }

        var rff = new WebSocket("ws://localhost:8080/rff");

        rff.onmessage = function (event) {
            var data = JSON.parse(event.data);

            if (data.Clear != undefined) {
                var cells = document.getElementsByClassName("hf");
                for (i = 0; i < cells.length; i++) {
                    cells[i].style.backgroundColor = "";
                }
            } else if (data.Cell != undefined) {
                changeCellColor(data.Cell);
            } else if (data.SingleDecker != undefined) {
                document.getElementById("single-decker").innerText = data.SingleDecker;
                document.getElementById("two-decker").innerText = data.TwoDecker;
                document.getElementById("three-decker").innerText = data.ThreeDecker;
                document.getElementById("four-decker").innerText = data.FourDecker
            }
        }

        function randomFilling() {
            rff.send("Start the random filling");
        }

        function startTheGame() {
            stg.send("The game has begun");
        }
    </script>
</body>

</html>
{{ end }}